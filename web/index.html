<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FinanceScope - Advanced Research Platform</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/animations.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Fira+Code:wght@400;500&display=swap" rel="stylesheet">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.4/moment.min.js"></script>
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-animation">
            <div class="pulse-circle"></div>
            <div class="loading-text">
                <span class="brand">FinanceScope</span>
                <span class="subtitle">Initializing Market Data...</span>
            </div>
        </div>
    </div>

    <!-- Main Navigation -->
    <nav class="main-nav">
        <div class="nav-container">
            <div class="nav-brand">
                <i class="fas fa-chart-line brand-icon"></i>
                <span class="brand-text">FinanceScope</span>
            </div>
            
            <div class="nav-menu">
                <div class="nav-item active" data-page="dashboard">
                    <i class="fas fa-tachometer-alt"></i>
                    <span>Dashboard</span>
                </div>
                <div class="nav-item" data-page="analysis">
                    <i class="fas fa-chart-bar"></i>
                    <span>Analysis</span>
                </div>
                <div class="nav-item" data-page="insider-trading">
                    <i class="fas fa-user-secret"></i>
                    <span>Insider Trading</span>
                </div>
                <div class="nav-item" data-page="reports">
                    <i class="fas fa-file-chart"></i>
                    <span>Reports</span>
                </div>
                <div class="nav-item" data-page="settings">
                    <i class="fas fa-cog"></i>
                    <span>Settings</span>
                </div>
            </div>

            <div class="nav-actions">
                <div class="market-status">
                    <div class="status-indicator pulse-green"></div>
                    <span class="status-text">Markets Open</span>
                </div>
                <div class="user-profile">
                    <i class="fas fa-user-circle"></i>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content Area -->
    <main class="main-content">
        <!-- Dashboard Page -->
        <div id="dashboard-page" class="page active">
            <div class="page-header">
                <h1 class="page-title">Market Dashboard</h1>
                <div class="page-actions">
                    <button class="btn btn-primary" id="refresh-data">
                        <i class="fas fa-sync-alt"></i>
                        Refresh Data
                    </button>
                </div>
            </div>

            <!-- Market Overview Cards -->
            <div class="cards-grid">
                <div class="market-card">
                    <div class="card-header">
                        <h3>S&P 500</h3>
                        <i class="fas fa-chart-line card-icon"></i>
                    </div>
                    <div class="card-content">
                        <div class="metric-value" id="sp500-value">4,782.82</div>
                        <div class="metric-change positive" id="sp500-change">+0.32%</div>
                    </div>
                    <div class="mini-chart" id="sp500-chart"></div>
                </div>

                <div class="market-card">
                    <div class="card-header">
                        <h3>NASDAQ</h3>
                        <i class="fas fa-microchip card-icon"></i>
                    </div>
                    <div class="card-content">
                        <div class="metric-value" id="nasdaq-value">16,740.39</div>
                        <div class="metric-change positive" id="nasdaq-change">+0.58%</div>
                    </div>
                    <div class="mini-chart" id="nasdaq-chart"></div>
                </div>

                <div class="market-card">
                    <div class="card-header">
                        <h3>VIX</h3>
                        <i class="fas fa-wave-square card-icon"></i>
                    </div>
                    <div class="card-content">
                        <div class="metric-value" id="vix-value">13.21</div>
                        <div class="metric-change negative" id="vix-change">-2.14%</div>
                    </div>
                    <div class="mini-chart" id="vix-chart"></div>
                </div>

                <div class="market-card">
                    <div class="card-header">
                        <h3>Portfolio Value</h3>
                        <i class="fas fa-wallet card-icon"></i>
                    </div>
                    <div class="card-content">
                        <div class="metric-value" id="portfolio-value">$125,432</div>
                        <div class="metric-change positive" id="portfolio-change">+2.3%</div>
                    </div>
                    <div class="mini-chart" id="portfolio-chart"></div>
                </div>
            </div>

            <!-- Main Chart Area -->
            <div class="chart-container">
                <div class="chart-header">
                    <h2>Market Performance</h2>
                    <div class="chart-controls">
                        <div class="time-selector">
                            <button class="time-btn active" data-period="1D">1D</button>
                            <button class="time-btn" data-period="1W">1W</button>
                            <button class="time-btn" data-period="1M">1M</button>
                            <button class="time-btn" data-period="3M">3M</button>
                            <button class="time-btn" data-period="1Y">1Y</button>
                        </div>
                        <div class="chart-type-selector">
                            <select id="chart-type">
                                <option value="line">Line Chart</option>
                                <option value="candlestick">Candlestick</option>
                                <option value="volume">Volume</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div id="main-chart" class="main-chart"></div>
            </div>

            <!-- Secondary Content Grid -->
            <div class="secondary-grid">
                <!-- Enhanced Watchlist -->
                <div class="panel watchlist-panel">
                    <div class="panel-header">
                        <h3>
                            <i class="fas fa-star"></i>
                            Watchlist
                        </h3>
                        <div class="watchlist-actions">
                            <button class="btn-icon watchlist-sort" id="sort-watchlist" title="Sort Watchlist">
                                <i class="fas fa-sort"></i>
                            </button>
                            <button class="btn-icon watchlist-refresh" id="refresh-watchlist" title="Refresh Data">
                                <i class="fas fa-sync-alt"></i>
                            </button>
                            <button class="btn-icon watchlist-add" id="add-symbol" title="Add Symbol">
                                <i class="fas fa-plus"></i>
                            </button>
                            <button class="btn-icon watchlist-settings" id="watchlist-settings" title="Settings">
                                <i class="fas fa-cog"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="watchlist-toolbar">
                        <div class="watchlist-stats">
                            <span class="stats-item">
                                <span class="stats-value" id="watchlist-count">5</span>
                                <span class="stats-label">symbols</span>
                            </span>
                            <span class="stats-item">
                                <span class="stats-value positive" id="gainers-count">3</span>
                                <span class="stats-label">gainers</span>
                            </span>
                            <span class="stats-item">
                                <span class="stats-value negative" id="losers-count">2</span>
                                <span class="stats-label">losers</span>
                            </span>
                        </div>
                        <div class="watchlist-search">
                            <input type="text" id="watchlist-search" placeholder="Search symbols..." class="watchlist-search-input">
                            <i class="fas fa-search watchlist-search-icon"></i>
                        </div>
                    </div>
                    
                    <div class="watchlist-content" id="watchlist-container">
                        <div class="watchlist-loading">
                            <div class="loading-spinner">
                                <div class="spinner-ring"></div>
                            </div>
                            <p>Loading watchlist data...</p>
                        </div>
                    </div>
                    
                    <div class="watchlist-footer">
                        <div class="watchlist-summary">
                            <span class="portfolio-value">
                                <span class="label">Portfolio:</span>
                                <span class="value" id="portfolio-value">$0.00</span>
                            </span>
                            <span class="daily-change">
                                <span class="label">Daily:</span>
                                <span class="value" id="daily-change">+$0.00 (+0.00%)</span>
                            </span>
                        </div>
                        <button class="watchlist-expand-btn" id="expand-watchlist">
                            <i class="fas fa-expand-alt"></i>
                            View All
                        </button>
                    </div>
                </div>

                <!-- Enhanced News Feed -->
                <div class="panel news-panel">
                    <div class="panel-header">
                        <h3>
                            <i class="fas fa-newspaper"></i>
                            Market News
                        </h3>
                        <div class="news-controls">
                            <div class="news-filter">
                                <select id="news-category">
                                    <option value="all">All News</option>
                                    <option value="market">Market</option>
                                    <option value="earnings">Earnings</option>
                                    <option value="analysis">Analysis</option>
                                    <option value="crypto">Crypto</option>
                                    <option value="economic">Economic</option>
                                </select>
                            </div>
                            <div class="news-actions">
                                <button class="btn-icon news-refresh" id="refresh-news" title="Refresh News">
                                    <i class="fas fa-sync-alt"></i>
                                </button>
                                <button class="btn-icon news-expand" id="expand-news" title="Expand News">
                                    <i class="fas fa-expand"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="news-toolbar">
                        <div class="news-status">
                            <span class="news-indicator"></span>
                            <span class="news-status-text">Live Updates</span>
                        </div>
                        <div class="news-search">
                            <input type="text" id="news-search" placeholder="Search news..." class="news-search-input">
                            <i class="fas fa-search news-search-icon"></i>
                        </div>
                    </div>
                    
                    <div class="news-content" id="news-feed">
                        <div class="news-loading">
                            <div class="news-loading-animation">
                                <div class="news-pulse"></div>
                                <div class="news-pulse"></div>
                                <div class="news-pulse"></div>
                            </div>
                            <p>Loading latest news...</p>
                        </div>
                    </div>
                    
                    <div class="news-footer">
                        <button class="news-load-more" id="load-more-news">
                            <i class="fas fa-chevron-down"></i>
                            Load More Articles
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Analysis Page -->
        <div id="analysis-page" class="page">
            <div class="page-header">
                <h1 class="page-title">Technical Analysis</h1>
                <div class="symbol-search">
                    <input type="text" id="analysis-symbol" placeholder="Enter symbol (e.g., AAPL)" class="symbol-input">
                    <button class="btn btn-primary" id="analyze-symbol">
                        <i class="fas fa-search"></i>
                        Analyze
                    </button>
                </div>
            </div>

            <div class="analysis-container">
                <div class="analysis-sidebar">
                    <div class="indicator-panel">
                        <h3>Technical Indicators</h3>
                        <div class="indicator-group">
                            <label class="checkbox-label">
                                <input type="checkbox" checked data-indicator="ma">
                                <span class="checkmark"></span>
                                Moving Averages
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" checked data-indicator="rsi">
                                <span class="checkmark"></span>
                                RSI
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" data-indicator="macd">
                                <span class="checkmark"></span>
                                MACD
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" data-indicator="bollinger">
                                <span class="checkmark"></span>
                                Bollinger Bands
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" data-indicator="vwap">
                                <span class="checkmark"></span>
                                VWAP
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" data-indicator="stochastic">
                                <span class="checkmark"></span>
                                Stochastic
                            </label>
                        </div>
                    </div>

                    <div class="analysis-metrics">
                        <h3>Key Metrics</h3>
                        <div class="metrics-grid" id="analysis-metrics">
                            <!-- Metrics will be populated dynamically -->
                        </div>
                    </div>
                </div>

                <div class="analysis-main">
                    <div id="analysis-chart" class="analysis-chart"></div>
                    <div class="indicators-section">
                        <div id="rsi-chart" class="indicator-chart"></div>
                        <div id="volume-chart" class="indicator-chart"></div>
                        <div id="macd-chart" class="indicator-chart"></div>
                        <div id="stochastic-chart" class="indicator-chart"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Insider Trading Page -->
        <div id="insider-trading-page" class="page">
            <div class="page-header">
                <h1 class="page-title">
                    <i class="fas fa-user-secret"></i>
                    Insider Trading Monitor
                </h1>
                <div class="insider-controls">
                    <div class="search-container">
                        <input type="text" id="insider-symbol" placeholder="Enter symbol (e.g., AAPL)" class="symbol-input">
                        <div class="search-suggestions" id="insider-suggestions"></div>
                    </div>
                    <select id="lookback-days" class="select-input">
                        <option value="30">Last 30 days</option>
                        <option value="60">Last 60 days</option>
                        <option value="90" selected>Last 90 days</option>
                        <option value="180">Last 6 months</option>
                        <option value="365">Last year</option>
                    </select>
                    <select id="transaction-type" class="select-input">
                        <option value="all">All Transactions</option>
                        <option value="purchase">Purchases Only</option>
                        <option value="sale">Sales Only</option>
                        <option value="significant">Significant Only</option>
                    </select>
                    <button class="btn btn-primary" id="run-insider-analysis">
                        <i class="fas fa-search"></i>
                        Analyze
                    </button>
                    <button class="btn btn-secondary" id="export-insider-data">
                        <i class="fas fa-download"></i>
                        Export
                    </button>
                    <button class="btn btn-info" onclick="InsiderTrading.debugInfo()">
                        <i class="fas fa-bug"></i>
                        Debug
                    </button>
                </div>
            </div>

            <!-- Quick Overview Cards -->
            <div class="insider-overview">
                <div class="insider-card">
                    <div class="card-icon">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <div class="card-content">
                        <h3 id="total-transactions">--</h3>
                        <p>Total Transactions</p>
                    </div>
                </div>
                <div class="insider-card">
                    <div class="card-icon purchase">
                        <i class="fas fa-arrow-up"></i>
                    </div>
                    <div class="card-content">
                        <h3 id="total-purchases">--</h3>
                        <p>Purchases</p>
                    </div>
                </div>
                <div class="insider-card">
                    <div class="card-icon sale">
                        <i class="fas fa-arrow-down"></i>
                    </div>
                    <div class="card-content">
                        <h3 id="total-sales">--</h3>
                        <p>Sales</p>
                    </div>
                </div>
                <div class="insider-card">
                    <div class="card-icon">
                        <i class="fas fa-dollar-sign"></i>
                    </div>
                    <div class="card-content">
                        <h3 id="total-value">--</h3>
                        <p>Total Value</p>
                    </div>
                </div>
                <div class="insider-card">
                    <div class="card-icon">
                        <i class="fas fa-balance-scale"></i>
                    </div>
                    <div class="card-content">
                        <h3 id="buy-sell-ratio">--</h3>
                        <p>Buy/Sell Ratio</p>
                    </div>
                </div>
            </div>

            <!-- Main Content Area -->
            <div class="insider-main-content">
                <!-- Left Panel: Charts and Analytics -->
                <div class="insider-analytics">
                    <div class="chart-section">
                        <div class="chart-header">
                            <h3>Trading Activity Timeline</h3>
                            <div class="chart-controls">
                                <button class="chart-btn active" data-view="volume">Volume</button>
                                <button class="chart-btn" data-view="value">Value</button>
                                <button class="chart-btn" data-view="cumulative">Cumulative</button>
                            </div>
                        </div>
                        <div id="insider-timeline-chart" class="insider-chart"></div>
                    </div>

                    <div class="chart-section">
                        <div class="chart-header">
                            <h3>Transaction Distribution</h3>
                        </div>
                        <div class="chart-grid">
                            <div id="transaction-type-chart" class="insider-chart-small"></div>
                            <div id="insider-role-chart" class="insider-chart-small"></div>
                        </div>
                    </div>

                    <div class="insights-section">
                        <h3>Key Insights</h3>
                        <div id="insider-insights" class="insights-list">
                            <!-- Insights will be populated dynamically -->
                        </div>
                    </div>
                </div>

                <!-- Right Panel: Transaction Details -->
                <div class="insider-details">
                    <div class="details-header">
                        <h3>Transaction Details</h3>
                        <div class="filter-controls">
                            <input type="text" id="transaction-search" placeholder="Search transactions..." class="search-input">
                            <select id="sort-transactions" class="select-input-sm">
                                <option value="date-desc">Date (Newest)</option>
                                <option value="date-asc">Date (Oldest)</option>
                                <option value="value-desc">Value (Highest)</option>
                                <option value="value-asc">Value (Lowest)</option>
                                <option value="shares-desc">Shares (Most)</option>
                            </select>
                        </div>
                    </div>

                    <div class="transactions-container">
                        <div class="transaction-table-header">
                            <div class="table-col col-date">Date</div>
                            <div class="table-col col-insider">Insider</div>
                            <div class="table-col col-role">Role</div>
                            <div class="table-col col-type">Type</div>
                            <div class="table-col col-shares">Shares</div>
                            <div class="table-col col-price">Price</div>
                            <div class="table-col col-value">Value</div>
                        </div>
                        <div id="transactions-list" class="transactions-list">
                            <!-- Transactions will be populated dynamically -->
                        </div>
                    </div>

                    <div class="pagination-controls">
                        <button id="prev-page" class="btn btn-sm">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <span id="page-info">Page 1 of 1</span>
                        <button id="next-page" class="btn btn-sm">
                            <i class="fas fa-chevron-right"></i>
                        </button>
                        <select id="page-size" class="select-input-sm">
                            <option value="10">10 per page</option>
                            <option value="25" selected>25 per page</option>
                            <option value="50">50 per page</option>
                            <option value="100">100 per page</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Loading State -->
            <div id="insider-loading" class="insider-loading hidden">
                <div class="loading-spinner">
                    <div class="spinner"></div>
                </div>
                <p>Analyzing insider trading data...</p>
            </div>

            <!-- Empty State -->
            <div id="insider-empty" class="insider-empty">
                <div class="empty-icon">
                    <i class="fas fa-search"></i>
                </div>
                <h3>No Data Available</h3>
                <p>Enter a stock symbol above to analyze insider trading activity.</p>
                <div class="demo-actions">
                    <button class="btn btn-primary" onclick="InsiderTrading.loadDemoData()">
                        <i class="fas fa-play"></i>
                        Try Demo with AAPL
                    </button>
                </div>
            </div>

            <!-- Error State -->
            <div id="insider-error" class="insider-error hidden">
                <div class="error-icon">
                    <i class="fas fa-exclamation-triangle"></i>
                </div>
                <h3>Analysis Failed</h3>
                <p id="error-message">Unable to retrieve insider trading data. Please try again.</p>
                <button class="btn btn-primary" onclick="app.retryInsiderAnalysis()">
                    <i class="fas fa-redo"></i>
                    Retry
                </button>
            </div>
        </div>

        <!-- Reports Page -->
        <div id="reports-page" class="page">
            <div class="page-header">
                <h1 class="page-title">Investment Reports</h1>
            </div>

            <div class="reports-container">
                <div class="report-selector">
                    <div class="report-types">
                        <div class="report-type-card active" data-type="portfolio">
                            <i class="fas fa-chart-pie"></i>
                            <h3>Portfolio Summary</h3>
                            <p>Comprehensive portfolio analysis and performance metrics</p>
                        </div>
                        <div class="report-type-card" data-type="market">
                            <i class="fas fa-globe"></i>
                            <h3>Market Analysis</h3>
                            <p>Sector performance and market breadth indicators</p>
                        </div>
                        <div class="report-type-card" data-type="stock">
                            <i class="fas fa-chart-line"></i>
                            <h3>Stock Research</h3>
                            <p>Individual stock analysis with technical and fundamental data</p>
                        </div>
                        <div class="report-type-card" data-type="risk">
                            <i class="fas fa-shield-alt"></i>
                            <h3>Risk Assessment</h3>
                            <p>Portfolio risk metrics and stress testing scenarios</p>
                        </div>
                    </div>

                    <div class="report-options">
                        <div class="date-range">
                            <label>Date Range:</label>
                            <input type="date" id="start-date" class="date-input">
                            <input type="date" id="end-date" class="date-input">
                        </div>
                        <div class="format-options">
                            <label>Format:</label>
                            <select id="report-format" class="select-input">
                                <option value="interactive">Interactive Dashboard</option>
                                <option value="pdf">PDF Report</option>
                                <option value="excel">Excel Export</option>
                            </select>
                        </div>
                        <button class="btn btn-primary btn-large" id="generate-report">
                            <i class="fas fa-file-chart"></i>
                            Generate Report
                        </button>
                    </div>
                </div>

                <div class="report-content" id="report-content">
                    <!-- Report content will be generated here -->
                </div>
            </div>
        </div>

        <!-- Settings Page -->
        <div id="settings-page" class="page">
            <div class="page-header">
                <h1 class="page-title">Settings</h1>
            </div>

            <div class="settings-container">
                <div class="settings-section">
                    <h2>API Configuration</h2>
                    <div class="settings-grid">
                        <div class="setting-item">
                            <label>Alpha Vantage API Key</label>
                            <input type="password" id="alpha-vantage-key" class="setting-input" placeholder="Enter API key">
                        </div>
                        <div class="setting-item">
                            <label>Finnhub API Key</label>
                            <input type="password" id="finnhub-key" class="setting-input" placeholder="Enter API key">
                        </div>
                        <div class="setting-item">
                            <label>SEC API Key</label>
                            <input type="password" id="sec-key" class="setting-input" placeholder="Enter API key">
                        </div>
                    </div>
                </div>

                <div class="settings-section">
                    <h2>Display Preferences</h2>
                    <div class="settings-grid">
                        <div class="setting-item">
                            <label>Theme</label>
                            <select id="theme-selector" class="setting-input">
                                <option value="dark">Dark Mode</option>
                                <option value="light">Light Mode</option>
                                <option value="auto">Auto</option>
                            </select>
                        </div>
                        <div class="setting-item">
                            <label>Default Chart Period</label>
                            <select id="default-period" class="setting-input">
                                <option value="1D">1 Day</option>
                                <option value="1W">1 Week</option>
                                <option value="1M" selected>1 Month</option>
                                <option value="3M">3 Months</option>
                                <option value="1Y">1 Year</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="settings-actions">
                    <button class="btn btn-primary" id="save-settings">
                        <i class="fas fa-save"></i>
                        Save Settings
                    </button>
                    <button class="btn btn-secondary" id="reset-settings">
                        <i class="fas fa-undo"></i>
                        Reset to Defaults
                    </button>
                </div>
            </div>
        </div>
    </main>

    <!-- Modals -->
    <div id="modal-overlay" class="modal-overlay">
        <div class="modal" id="symbol-modal">
            <div class="modal-header">
                <h3>Add Symbol to Watchlist</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-content">
                <input type="text" id="new-symbol" placeholder="Enter symbol (e.g., AAPL)" class="modal-input">
                <div class="modal-actions">
                    <button class="btn btn-primary" id="add-symbol-confirm">Add</button>
                    <button class="btn btn-secondary" id="add-symbol-cancel">Cancel</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Notification Container -->
    <div id="notification-container" class="notification-container"></div>

    <!-- Scripts -->
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/api.js"></script>
    <script src="js/charts.js"></script>
    <script src="js/dashboard.js"></script>
    <script src="js/analysis.js"></script>
    <script src="js/insider-trading.js"></script>
    <script src="js/reports.js"></script>
    <script src="js/settings.js"></script>
    <script src="js/app.js"></script>
</body>
</html> 